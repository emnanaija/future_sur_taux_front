{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chemseddine\\\\Desktop\\\\future_sur_taux\\\\frontend\\\\src\\\\components\\\\FutureCreationForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { ChevronRight, Calendar, Info, DollarSign, TrendingUp, Settings, CheckCircle2, AlertCircle, ChevronLeft, Loader } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n// Ajouter l'interface pour les sections\n\n// Ajouter l'interface pour les erreurs\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FutureCreationForm = () => {\n  _s();\n  const [form, setForm] = useState({\n    symbol: '',\n    description: '',\n    isin: '',\n    expirationCode: '',\n    parentTicker: '',\n    fullName: '',\n    segment: '',\n    maturityDate: '',\n    firstTradingDate: '',\n    lastTraadingDate: '',\n    initialMarginAmount: 0,\n    percentageMargin: 0,\n    lotSize: 0,\n    contractMultiplier: 0,\n    tradingCurrency: '',\n    underlyingType: '',\n    underlyingId: 0,\n    settlementMethod: '',\n    instrumentStatus: false,\n    tickSize: 0,\n    tickValue: 0,\n    depositType: ''\n  });\n  const [currentStep, setCurrentStep] = useState(0);\n  const [expandedSections, setExpandedSections] = useState({});\n  const [settlementMethods, setSettlementMethods] = useState([]);\n  const [depositTypes, setDepositTypes] = useState([]);\n  const [underlyingTypes, setUnderlyingTypes] = useState([]);\n  const [underlyingAssets, setUnderlyingAssets] = useState([]);\n  const [editMode, setEditMode] = useState('tickValue');\n  const [tickSizeStr, setTickSizeStr] = useState('');\n  const [percentageMarginStr, setPercentageMarginStr] = useState('');\n  const [tickValueInput, setTickValueInput] = useState(0);\n  const [contractMultiplierInput, setContractMultiplierInput] = useState(0);\n  const [completedSections, setCompletedSections] = useState(new Set());\n  // Définir correctement formErrors avec son type\n  const [formErrors, setFormErrors] = useState({});\n  const [justArrivedOnLastStep, setJustArrivedOnLastStep] = useState(false);\n  useEffect(() => {\n    async function fetchEnums() {\n      const [settlementRes, depositRes, typeRes] = await Promise.all([axios.get('/api/enums/settlement-methods'), axios.get('/api/enums/deposit-types'), axios.get('/api/underlyings/types')]);\n      setSettlementMethods(settlementRes.data);\n      setDepositTypes(depositRes.data);\n      setUnderlyingTypes(typeRes.data);\n    }\n    fetchEnums();\n  }, []);\n  useEffect(() => {\n    if (form.underlyingType) {\n      axios.get(`/api/underlying-assets?type=${form.underlyingType}`).then(res => setUnderlyingAssets(res.data)).catch(() => setUnderlyingAssets([]));\n      setForm(prev => ({\n        ...prev,\n        underlyingId: 0\n      }));\n    } else {\n      setUnderlyingAssets([]);\n      setForm(prev => ({\n        ...prev,\n        underlyingId: 0\n      }));\n    }\n  }, [form.underlyingType]);\n  useEffect(() => {\n    setTickSizeStr(form.tickSize > 0 ? form.tickSize.toString() : '');\n  }, [form.tickSize]);\n  useEffect(() => {\n    setPercentageMarginStr(form.percentageMargin > 0 ? form.percentageMargin.toString() : '');\n  }, [form.percentageMargin]);\n  useEffect(() => {\n    const tickSize = parseTickSize(tickSizeStr);\n    if (editMode === 'tickValue') {\n      const contractMultiplierCalc = tickSize > 0 ? tickValueInput / tickSize : 0;\n\n      // Met à jour form seulement si les valeurs ont changé\n      setForm(prev => {\n        if (prev.tickSize !== tickSize || prev.tickValue !== tickValueInput || prev.contractMultiplier !== contractMultiplierCalc) {\n          return {\n            ...prev,\n            tickSize,\n            tickValue: tickValueInput,\n            contractMultiplier: contractMultiplierCalc\n          };\n        }\n        return prev;\n      });\n\n      // Pour l'affichage local, on peut mettre à jour contractMultiplierInput pour rester cohérent\n      setContractMultiplierInput(contractMultiplierCalc);\n    } else {\n      const tickValueCalc = contractMultiplierInput * tickSize;\n      setForm(prev => {\n        if (prev.tickSize !== tickSize || prev.contractMultiplier !== contractMultiplierInput || prev.tickValue !== tickValueCalc) {\n          return {\n            ...prev,\n            tickSize,\n            contractMultiplier: contractMultiplierInput,\n            tickValue: tickValueCalc\n          };\n        }\n        return prev;\n      });\n\n      // Mettre à jour tickValueInput local pour affichage\n      setTickValueInput(tickValueCalc);\n    }\n  }, [tickSizeStr, editMode, tickValueInput, contractMultiplierInput]);\n  const parsePercentageMargin = str => {\n    if (!str) return 0;\n    const val = parseFloat(str);\n    return isNaN(val) ? 0 : val;\n  };\n  const parseTickSize = str => {\n    if (!str) return 0;\n    const val = parseFloat(str);\n    return isNaN(val) ? 0 : val;\n  };\n  const isRate = form.depositType === 'RATE';\n  const isAmount = form.depositType === 'AMOUNT';\n\n  // Corriger le handler pour les checkboxes\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type\n    } = e.target;\n    const checked = type === 'checkbox' ? e.target.checked : undefined;\n    setForm(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handlePercentageMarginChange = e => {\n    const val = parseFloat(e.target.value);\n    setForm(prev => ({\n      ...prev,\n      percentageMargin: val,\n      initialMarginAmount: prev.lotSize * val\n    }));\n  };\n  const handleInitialMarginAmountChange = e => {\n    const val = parseFloat(e.target.value);\n    setForm(prev => ({\n      ...prev,\n      initialMarginAmount: val,\n      percentageMargin: prev.lotSize > 0 ? val / prev.lotSize : 0\n    }));\n  };\n  const handleTickValueChange = e => {\n    const val = parseFloat(e.target.value);\n    setTickValueInput(val);\n  };\n  const handleContractMultiplierChange = e => {\n    const val = parseFloat(e.target.value);\n    setContractMultiplierInput(val);\n  };\n  const handleTickSizeChange = e => {\n    setTickSizeStr(e.target.value);\n  };\n  const handlePercentageMarginInputChange = e => {\n    const str = e.target.value;\n    setPercentageMarginStr(str);\n    const val = parsePercentageMargin(str);\n    setForm(prev => ({\n      ...prev,\n      percentageMargin: val,\n      initialMarginAmount: prev.lotSize * val\n    }));\n  };\n  useEffect(() => {\n    setForm(prev => {\n      if (isRate) {\n        return {\n          ...prev,\n          initialMarginAmount: prev.lotSize * prev.percentageMargin\n        };\n      } else if (isAmount) {\n        return {\n          ...prev,\n          percentageMargin: prev.lotSize > 0 ? prev.initialMarginAmount / prev.lotSize : 0\n        };\n      }\n      return prev;\n    });\n  }, [form.lotSize, form.depositType]);\n  const handleModeChange = mode => {\n    setEditMode(mode);\n  };\n\n  // Ajouter un état pour la validation globale\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Fonction de validation complète\n  const validateForm = () => {\n    const errors = {};\n\n    // Validation des champs obligatoires\n    if (!form.symbol) errors.symbol = 'Le symbole est requis';\n    if (!form.underlyingType) errors.underlyingType = 'Le type de sous-jacent est requis';\n    if (!form.underlyingId) errors.underlyingId = 'Le sous-jacent est requis';\n    if (!form.depositType) errors.depositType = 'Le type de dépôt est requis';\n    if (!form.lotSize) errors.lotSize = 'La taille de lot est requise';\n    if (!form.tickSize) errors.tickSize = 'Le tick size est requis';\n    if (!form.firstTradingDate) errors.firstTradingDate = 'La date de première négociation est requise';\n    if (!form.lastTraadingDate) errors.lastTraadingDate = 'La date de dernière négociation est requise';\n    if (!form.tradingCurrency) errors.tradingCurrency = 'La devise de négociation est requise';\n    if (!form.settlementMethod) errors.settlementMethod = 'La méthode de règlement est requise';\n\n    // Validation des valeurs numériques\n    if (form.tickSize <= 0) errors.tickSize = 'Le tick size doit être supérieur à 0';\n    if (form.lotSize <= 0) errors.lotSize = 'La taille de lot doit être supérieure à 0';\n\n    // Mise à jour des erreurs\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  // Modifier le handleSubmit\n  const handleSubmit = async e => {\n    e.preventDefault();\n    // Empêcher la soumission si on n'est pas sur la dernière étape\n    if (currentStep !== formSections.length - 1) {\n      return;\n    }\n    // Empêcher la double soumission\n    if (isSubmitting) return;\n\n    // Valider le formulaire\n    if (!validateForm()) {\n      alert('Veuillez corriger les erreurs avant de soumettre le formulaire');\n      return;\n    }\n    try {\n      setIsSubmitting(true);\n      await axios.post('/api/futures', form);\n      alert('Future créé avec succès');\n      // Optionnel : rediriger ou réinitialiser le formulaire\n    } catch (err) {\n      alert('Erreur lors de la création. Veuillez vérifier les données et réessayer.');\n      console.error(err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const [initialMarginAmountStr, setInitialMarginAmountStr] = useState('');\n  useEffect(() => {\n    setInitialMarginAmountStr(form.initialMarginAmount > 0 ? form.initialMarginAmount.toString() : '');\n  }, [form.initialMarginAmount]);\n  const parseInitialMarginAmount = str => {\n    if (!str) return 0;\n    const val = parseFloat(str);\n    return isNaN(val) ? 0 : val;\n  };\n  const handleInitialMarginAmountInputChange = e => {\n    const str = e.target.value;\n    setInitialMarginAmountStr(str);\n    const val = parseInitialMarginAmount(str);\n    setForm(prev => ({\n      ...prev,\n      initialMarginAmount: val,\n      percentageMargin: prev.lotSize > 0 ? val / prev.lotSize : 0\n    }));\n  };\n\n  // Définir les sections avec leurs champs requis\n  const formSections = [{\n    id: 'identification',\n    title: \"Identification de l'instrument\",\n    icon: /*#__PURE__*/_jsxDEV(Info, {\n      className: \"w-5 h-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }, this),\n    description: \"Informations de base\",\n    fields: ['symbol', 'description', 'isin', 'fullName']\n  }, {\n    id: 'deposit',\n    title: \"Dépôt & Marges\",\n    icon: /*#__PURE__*/_jsxDEV(DollarSign, {\n      className: \"w-5 h-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }, this),\n    description: \"Configuration des marges\",\n    fields: ['depositType', 'lotSize', 'initialMarginAmount', 'percentageMargin']\n  }, {\n    id: 'underlying',\n    title: \"Sous-jacents\",\n    icon: /*#__PURE__*/_jsxDEV(TrendingUp, {\n      className: \"w-5 h-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }, this),\n    description: \"Définition du sous-jacent\",\n    fields: ['underlyingType', 'underlyingId']\n  }, {\n    id: 'trading',\n    title: \"Négociation\",\n    icon: /*#__PURE__*/_jsxDEV(Calendar, {\n      className: \"w-5 h-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 13\n    }, this),\n    description: \"Paramètres de trading\",\n    fields: ['firstTradingDate', 'lastTraadingDate', 'tradingCurrency', 'tickSize', 'settlementMethod']\n  }];\n\n  // Ajouter l'état pour la navigation\n  const [completedSteps, setCompletedSteps] = useState(new Set());\n\n  // Fonctions de navigation\n  // Améliorer la fonction de validation des étapes\n  const validateStep = stepIndex => {\n    const section = formSections[stepIndex];\n    const errors = {};\n    section.fields.forEach(field => {\n      const value = form[field];\n      if (value === undefined || value === '' || value === 0) {\n        errors[field] = `Le champ ${field} est requis`;\n      }\n\n      // Validations spécifiques par champ\n      switch (field) {\n        case 'tickSize':\n          if (parseFloat(String(value)) <= 0) {\n            errors[field] = 'Le tick size doit être supérieur à 0';\n          }\n          break;\n        case 'lotSize':\n          if (parseFloat(String(value)) <= 0) {\n            errors[field] = 'La taille de lot doit être supérieure à 0';\n          }\n          break;\n        // Ajouter d'autres validations spécifiques si nécessaire\n      }\n    });\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  // Modifier la fonction nextStep pour valider uniquement l'étape courante et effacer les erreurs des autres étapes\n  const nextStep = () => {\n    if (currentStep < formSections.length - 1) {\n      const section = formSections[currentStep];\n      const errors = {};\n      section.fields.forEach(field => {\n        const value = form[field];\n        if (value === undefined || value === '' || value === 0) {\n          errors[field] = `Le champ ${field} est requis`;\n        }\n        // Validations spécifiques\n        switch (field) {\n          case 'tickSize':\n            if (parseFloat(String(value)) <= 0) {\n              errors[field] = 'Le tick size doit être supérieur à 0';\n            }\n            break;\n          case 'lotSize':\n            if (parseFloat(String(value)) <= 0) {\n              errors[field] = 'La taille de lot doit être supérieure à 0';\n            }\n            break;\n        }\n      });\n      setFormErrors(errors); // On ne garde que les erreurs de l'étape courante\n      if (Object.keys(errors).length === 0) {\n        setCompletedSteps(prev => new Set(prev).add(currentStep));\n        setCurrentStep(prev => prev + 1);\n        if (currentStep === formSections.length - 2) {\n          setJustArrivedOnLastStep(true);\n        }\n      }\n    }\n  };\n  const prevStep = () => {\n    if (currentStep > 0) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n\n  // Ajouter des animations pour les transitions\n  const pageTransition = {\n    initial: {\n      opacity: 0,\n      x: -20\n    },\n    animate: {\n      opacity: 1,\n      x: 0\n    },\n    exit: {\n      opacity: 0,\n      x: 20\n    }\n  };\n\n  // Ajouter un composant pour les tooltips\n  const Tooltip = ({\n    children\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute -top-8 left-0 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap\",\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 442,\n    columnNumber: 5\n  }, this);\n\n  // Ajouter le composant ProgressBar\n  const ProgressBar = ({\n    currentStep,\n    totalSteps,\n    completedSteps\n  }) => {\n    const percentage = (currentStep + 1) / totalSteps * 100;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: Array.from({\n          length: totalSteps\n        }).map((_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `\n                w-10 h-10 rounded-full flex items-center justify-center\n                transition-all duration-300 ease-in-out\n                ${completedSteps.has(index) ? 'bg-teal-600 text-white' : index === currentStep ? 'bg-teal-100 text-teal-600 border-2 border-teal-600' : 'bg-gray-100 text-gray-400'}\n              `,\n            children: completedSteps.has(index) ? /*#__PURE__*/_jsxDEV(CheckCircle2, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-semibold\",\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute -bottom-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap\",\n              children: formSections[index].title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this), index < totalSteps - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute h-0.5 w-[200%] left-1/2 top-5 -z-10\n                  ${index < currentStep ? 'bg-teal-600' : 'bg-gray-200'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative h-2 bg-gray-100 rounded-full overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"absolute h-full bg-teal-600\",\n          initial: {\n            width: 0\n          },\n          animate: {\n            width: `${percentage}%`\n          },\n          transition: {\n            duration: 0.3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 5\n    }, this);\n  };\n\n  // Ajouter le composant HelpTooltip\n  const HelpTooltip = ({\n    content\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"group relative inline-block ml-2\",\n    children: [/*#__PURE__*/_jsxDEV(Info, {\n      className: \"w-4 h-4 text-gray-400 cursor-help\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-200 bottom-full mb-2 left-1/2 transform -translate-x-1/2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 text-white text-sm rounded-lg py-2 px-3 max-w-xs\",\n        children: [content, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-800\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 503,\n    columnNumber: 3\n  }, this);\n\n  // Ajouter le composant ValidationMessage\n  const ValidationMessage = ({\n    message,\n    type\n  }) => {\n    const colors = {\n      error: 'text-red-500 bg-red-50',\n      success: 'text-green-500 bg-green-50',\n      info: 'text-blue-500 bg-blue-50'\n    };\n    const icons = {\n      error: /*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 12\n      }, this),\n      success: /*#__PURE__*/_jsxDEV(CheckCircle2, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 14\n      }, this),\n      info: /*#__PURE__*/_jsxDEV(Info, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this)\n    };\n    return /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: -10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      exit: {\n        opacity: 0,\n        y: -10\n      },\n      className: `flex items-center ${colors[type]} rounded-lg px-3 py-2 text-sm mt-1`,\n      children: [icons[type], message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 5\n    }, this);\n  };\n\n  // Ajouter le composant FormField\n  const FormField = ({\n    label,\n    name,\n    value,\n    onChange,\n    type = 'text',\n    required = false,\n    error,\n    disabled = false,\n    helpText,\n    options = [],\n    readOnly = false,\n    className = ''\n  }) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `space-y-1 ${className}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center\",\n            children: [label, required && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-red-500 ml-1\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 26\n            }, this), helpText && /*#__PURE__*/_jsxDEV(HelpTooltip, {\n              content: helpText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 26\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 7\n      }, this), type === 'select' ? /*#__PURE__*/_jsxDEV(\"select\", {\n        name: name,\n        value: value,\n        onChange: onChange,\n        disabled: disabled,\n        className: `\n            w-full px-4 py-2 rounded-lg\n            ${disabled ? 'bg-gray-100 cursor-not-allowed' : 'bg-white'}\n            ${error ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-teal-500 focus:ring-teal-500'}\n            transition-all duration-200\n            focus:ring-2 focus:ring-opacity-50\n          `,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"S\\xE9lectionnez une option\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 11\n        }, this), options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: option.value,\n          children: option.label\n        }, option.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n        type: type,\n        name: name,\n        value: value,\n        onChange: onChange,\n        disabled: disabled,\n        readOnly: readOnly,\n        className: `\n            w-full px-4 py-2 rounded-lg\n            ${disabled || readOnly ? 'bg-gray-100 cursor-not-allowed' : 'bg-white'}\n            ${error ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-teal-500 focus:ring-teal-500'}\n            transition-all duration-200\n            focus:ring-2 focus:ring-opacity-50\n          `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: error && /*#__PURE__*/_jsxDEV(ValidationMessage, {\n          message: error,\n          type: \"error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 5\n    }, this);\n  };\n\n  // Modifier le rendu des champs dans renderStepContent\n  const renderStepContent = () => {\n    return /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      mode: \"wait\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: \"initial\",\n        animate: \"animate\",\n        exit: \"exit\",\n        variants: pageTransition,\n        transition: {\n          duration: 0.3\n        },\n        className: \"min-h-[400px]\",\n        children: [currentStep === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Code valeur\",\n              name: \"symbol\",\n              value: form.symbol,\n              onChange: handleChange,\n              required: true,\n              error: formErrors.symbol,\n              helpText: \"Identifiant unique de l'instrument financier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Code ISIN\",\n              name: \"isin\",\n              value: form.isin,\n              onChange: handleChange,\n              error: formErrors.isin,\n              helpText: \"Code international standardis\\xE9 (12 caract\\xE8res)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Code d'expiration\",\n              name: \"expirationCode\",\n              value: form.expirationCode,\n              onChange: handleChange,\n              error: formErrors.expirationCode,\n              helpText: \"Code qui identifie la date d'expiration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Ticker parent\",\n              name: \"parentTicker\",\n              value: form.parentTicker,\n              onChange: handleChange,\n              error: formErrors.parentTicker,\n              helpText: \"Code de l'instrument parent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Description\",\n              name: \"description\",\n              value: form.description,\n              onChange: handleChange,\n              error: formErrors.description,\n              helpText: \"Description courte de l'instrument\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Nom complet\",\n              name: \"fullName\",\n              value: form.fullName,\n              onChange: handleChange,\n              error: formErrors.fullName,\n              helpText: \"Nom officiel complet de l'instrument\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Structure march\\xE9\",\n              name: \"segment\",\n              value: form.segment,\n              onChange: handleChange,\n              error: formErrors.segment,\n              helpText: \"Segment de march\\xE9 o\\xF9 l'instrument est n\\xE9goci\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Date d'\\xE9ch\\xE9ance\",\n              name: \"maturityDate\",\n              value: form.maturityDate,\n              onChange: handleChange,\n              type: \"date\",\n              error: formErrors.maturityDate,\n              helpText: \"Date d'expiration du contrat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 11\n        }, this), currentStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setForm(prev => ({\n                ...prev,\n                depositType: 'AMOUNT'\n              })),\n              className: `\n                  flex-1 py-3 px-4 rounded-lg font-semibold\n                  transition-all duration-300 transform hover:scale-105\n                  ${isAmount ? 'bg-teal-600 text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                `,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                  className: \"w-5 h-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 19\n                }, this), \"Montant fixe\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setForm(prev => ({\n                ...prev,\n                depositType: 'RATE'\n              })),\n              className: `\n                  flex-1 py-3 px-4 rounded-lg font-semibold\n                  transition-all duration-300 transform hover:scale-105\n                  ${isRate ? 'bg-teal-600 text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                `,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n                  className: \"w-5 h-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 755,\n                  columnNumber: 19\n                }, this), \"Pourcentage\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Taille de lot\",\n              name: \"lotSize\",\n              value: form.lotSize,\n              onChange: handleChange,\n              type: \"number\",\n              required: true,\n              error: formErrors.lotSize,\n              helpText: \"Nombre d'unit\\xE9s par contrat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Type de d\\xE9p\\xF4t\",\n              name: \"depositType\",\n              value: form.depositType,\n              onChange: handleChange,\n              type: \"select\",\n              required: true,\n              error: formErrors.depositType,\n              options: depositTypes.map(type => ({\n                value: type,\n                label: type\n              })),\n              helpText: \"M\\xE9thode de calcul de la marge initiale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Montant de la marge initiale\",\n              name: \"initialMarginAmount\",\n              value: initialMarginAmountStr,\n              onChange: handleInitialMarginAmountInputChange,\n              type: \"text\",\n              error: formErrors.initialMarginAmount,\n              readOnly: !isAmount,\n              helpText: isAmount ? \"Montant fixe requis pour la marge\" : \"Calculé automatiquement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Pourcentage de marge\",\n              name: \"percentageMargin\",\n              value: percentageMarginStr,\n              onChange: handlePercentageMarginInputChange,\n              type: \"text\",\n              error: formErrors.percentageMargin,\n              readOnly: !isRate,\n              helpText: isRate ? \"Pourcentage de la taille de lot\" : \"Calculé automatiquement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 796,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this), currentStep === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Type du sous-jacent\",\n              name: \"underlyingType\",\n              value: form.underlyingType,\n              onChange: handleChange,\n              type: \"select\",\n              required: true,\n              error: formErrors.underlyingType,\n              options: underlyingTypes.map(type => ({\n                value: type,\n                label: type\n              })),\n              helpText: \"Nature de l'actif sous-jacent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Sous-jacent\",\n              name: \"underlyingId\",\n              value: form.underlyingId,\n              onChange: handleChange,\n              type: \"select\",\n              required: true,\n              disabled: !form.underlyingType,\n              error: formErrors.underlyingId,\n              options: underlyingAssets.map(asset => ({\n                value: asset.id.toString(),\n                label: asset.identifier\n              })),\n              helpText: \"Actif sp\\xE9cifique sur lequel le future est bas\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }, this), currentStep === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-r from-teal-50 to-white p-6 rounded-lg space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-800\",\n                children: \"Configuration des Ticks\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 845,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(HelpTooltip, {\n                content: \"Configurez soit la Tick Value, soit le Multiplicateur. L'autre valeur sera calcul\\xE9e automatiquement.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Tick Size\",\n              name: \"tickSize\",\n              value: tickSizeStr,\n              onChange: handleTickSizeChange,\n              type: \"text\",\n              required: true,\n              error: formErrors.tickSize,\n              helpText: \"Plus petite variation possible du prix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 849,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleModeChange('tickValue'),\n                className: `\n                    flex-1 py-3 px-4 rounded-lg font-medium\n                    transition-all duration-300 transform\n                    ${editMode === 'tickValue' ? 'bg-teal-600 text-white scale-105 shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                  `,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"flex items-center justify-center\",\n                  children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                    className: \"w-5 h-5 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 874,\n                    columnNumber: 21\n                  }, this), \"Saisir Tick Value\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 873,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleModeChange('contractMultiplier'),\n                className: `\n                    flex-1 py-3 px-4 rounded-lg font-medium\n                    transition-all duration-300 transform\n                    ${editMode === 'contractMultiplier' ? 'bg-teal-600 text-white scale-105 shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                  `,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"flex items-center justify-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Settings, {\n                    className: \"w-5 h-5 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 891,\n                    columnNumber: 21\n                  }, this), \"Saisir Multiplicateur\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 890,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 878,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Tick Value\",\n                name: \"tickValue\",\n                value: editMode === 'tickValue' ? tickValueInput : form.tickValue,\n                onChange: handleTickValueChange,\n                type: \"number\",\n                readOnly: editMode !== 'tickValue',\n                error: formErrors.tickValue,\n                helpText: editMode === 'tickValue' ? \"Valeur monétaire d'un tick\" : \"Calculé automatiquement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 898,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Multiplicateur\",\n                name: \"contractMultiplier\",\n                value: editMode === 'contractMultiplier' ? contractMultiplierInput : form.contractMultiplier,\n                onChange: handleContractMultiplierChange,\n                type: \"number\",\n                readOnly: editMode !== 'contractMultiplier',\n                error: formErrors.contractMultiplier,\n                helpText: editMode === 'contractMultiplier' ? \"Multiplicateur du contrat\" : \"Calculé automatiquement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 897,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Date de premi\\xE8re n\\xE9gociation\",\n              name: \"firstTradingDate\",\n              value: form.firstTradingDate,\n              onChange: handleChange,\n              type: \"date\",\n              required: true,\n              error: formErrors.firstTradingDate,\n              helpText: \"Premier jour de n\\xE9gociation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 923,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Date de derni\\xE8re n\\xE9gociation\",\n              name: \"lastTraadingDate\",\n              value: form.lastTraadingDate,\n              onChange: handleChange,\n              type: \"date\",\n              required: true,\n              error: formErrors.lastTraadingDate,\n              helpText: \"Dernier jour de n\\xE9gociation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 934,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Devise de n\\xE9gociation\",\n              name: \"tradingCurrency\",\n              value: form.tradingCurrency,\n              onChange: handleChange,\n              required: true,\n              error: formErrors.tradingCurrency,\n              helpText: \"Devise dans laquelle le future est n\\xE9goci\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 945,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Mode de livraison\",\n              name: \"settlementMethod\",\n              value: form.settlementMethod,\n              onChange: handleChange,\n              type: \"select\",\n              required: true,\n              error: formErrors.settlementMethod,\n              options: settlementMethods.map(method => ({\n                value: method,\n                label: method\n              })),\n              helpText: \"M\\xE9thode de r\\xE8glement \\xE0 l'\\xE9ch\\xE9ance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 955,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: [\"Cotation\", /*#__PURE__*/_jsxDEV(HelpTooltip, {\n                  content: \"Statut de cotation de l'instrument\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 970,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setForm(prev => ({\n                    ...prev,\n                    instrumentStatus: true\n                  })),\n                  className: `\n                      flex-1 py-3 px-4 rounded-lg font-semibold\n                      transition-all duration-200\n                      ${form.instrumentStatus ? 'bg-green-600 text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                    `,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle2, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 986,\n                      columnNumber: 23\n                    }, this), \"C\\xF4t\\xE9\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 985,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 973,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setForm(prev => ({\n                    ...prev,\n                    instrumentStatus: false\n                  })),\n                  className: `\n                      flex-1 py-3 px-4 rounded-lg font-semibold\n                      transition-all duration-200\n                      ${!form.instrumentStatus ? 'bg-red-600 text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\n                    `,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center justify-center\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1003,\n                      columnNumber: 23\n                    }, this), \"Non c\\xF4t\\xE9\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1002,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 990,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 972,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 967,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 922,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 11\n        }, this)]\n      }, currentStep, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 5\n    }, this);\n  };\n\n  // Ajouter un état pour le panneau d'aide\n  const [showHelp, setShowHelp] = useState(false);\n\n  // Ajouter une fonction pour obtenir l'aide contextuelle\n  const getContextualHelp = stepIndex => {\n    switch (stepIndex) {\n      case 0:\n        return [\"Le code valeur est l'identifiant unique de l'instrument financier. Il doit être unique et facile à retenir.\", \"Le code ISIN est un code international standardisé pour identifier les titres financiers. Il est généralement composé de 12 chiffres.\", \"Le nom complet est le nom officiel de l'instrument, souvent plus long que le code valeur.\", \"La structure marché définit le marché sur lequel l'instrument est négocié (bourse, cote, etc.).\"];\n      case 1:\n        return [\"La taille de lot est le nombre d'unités de l'instrument que vous devez détenir pour ouvrir une position.\", \"Le type de dépôt détermine comment la marge initiale est calculée. Pourcentage signifie que la marge est un pourcentage du montant de la position, Montant fixe signifie que la marge est un montant fixe.\", \"Le montant de la marge initiale est le montant requis pour ouvrir une position. Il peut être calculé automatiquement ou saisi manuellement.\", \"Le pourcentage de marge est le pourcentage de la taille de lot qui doit être déposé comme marge initiale.\"];\n      case 2:\n        return [\"Le type du sous-jacent définit la nature de l'actif sous-jacent (action, obligation, indice, etc.).\", \"Le sous-jacent est l'actif physique ou financier sur lequel le future est basé. Il doit être clairement défini.\", \"L'ID du sous-jacent est l'identifiant unique de l'actif dans la base de données.\"];\n      case 3:\n        return [\"La Tick Size est la plus petite variation possible du prix de l'instrument. Elle détermine la granularité des prix.\", \"Vous pouvez soit saisir la Tick Value, soit le Multiplicateur. L'autre valeur sera calculée automatiquement.\", \"La Tick Value est le montant en devise de base qui correspond à la variation de prix d'une unité.\", \"Le Multiplicateur est le nombre de Tick Value qui correspondent à une variation de prix d'une unité.\"];\n      default:\n        return [];\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-teal-50 to-white py-8 px-4 sm:px-6 lg:px-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900 mb-2\",\n          children: \"Cr\\xE9ation d'un Future\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: [\"Compl\\xE9tez les informations en suivant les \\xE9tapes. Les champs marqu\\xE9s d'un \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1062,\n            columnNumber: 85\n          }, this), \" sont obligatoires.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n        currentStep: currentStep,\n        totalSteps: formSections.length,\n        completedSteps: completedSteps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1067,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-lg p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-teal-100 rounded-lg mr-4\",\n              children: formSections[currentStep].icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1078,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-2xl font-bold text-gray-800\",\n                children: formSections[currentStep].title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1082,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: formSections[currentStep].description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1085,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1081,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1077,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"text-teal-600 hover:text-teal-700 flex items-center\",\n            onClick: () => setShowHelp(prev => !prev),\n            children: [/*#__PURE__*/_jsxDEV(Settings, {\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1095,\n              columnNumber: 13\n            }, this), \"Aide\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1076,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: showHelp && /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              height: 0\n            },\n            animate: {\n              opacity: 1,\n              height: 'auto'\n            },\n            exit: {\n              opacity: 0,\n              height: 0\n            },\n            className: \"bg-teal-50 rounded-lg p-4 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-teal-800 mb-2\",\n              children: \"Aide pour cette section\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1109,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"text-teal-700 space-y-2\",\n              children: getContextualHelp(currentStep).map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(Info, {\n                  className: \"w-4 h-4 mr-2 mt-1 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1113,\n                  columnNumber: 21\n                }, this), item]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1112,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1103,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1101,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"transition-all duration-300 transform\",\n          children: renderStepContent()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1123,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1074,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: prevStep,\n          className: `\n            px-6 py-3 rounded-lg font-medium\n            transition-all duration-200\n            flex items-center\n            ${currentStep === 0 ? 'opacity-50 cursor-not-allowed bg-gray-200' : 'bg-white hover:bg-gray-50 text-gray-700 shadow-sm hover:shadow'}\n          `,\n          disabled: currentStep === 0,\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            className: \"w-5 h-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1145,\n            columnNumber: 11\n          }, this), \"Pr\\xE9c\\xE9dent\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 9\n        }, this), currentStep === formSections.length - 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitting,\n          className: `\n              px-8 py-3 bg-teal-600 text-white rounded-lg font-medium\n              hover:bg-teal-700 transition-all duration-200\n              flex items-center\n              ${isSubmitting ? 'opacity-50 cursor-not-allowed' : ''}\n              shadow-lg hover:shadow-xl\n            `,\n          children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader, {\n              className: \"w-5 h-5 mr-2 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 17\n            }, this), \"Cr\\xE9ation en cours...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Cr\\xE9er le Future\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n              className: \"w-5 h-5 ml-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1150,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: nextStep,\n          className: \" px-8 py-3 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl \",\n          children: [\"Suivant\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n            className: \"w-5 h-5 ml-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1185,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1129,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1057,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1056,\n    columnNumber: 3\n  }, this);\n};\n_s(FutureCreationForm, \"+9UPwXYhVDTJl+x6A7gRqy97O64=\");\n_c = FutureCreationForm;\nexport default FutureCreationForm;\nvar _c;\n$RefreshReg$(_c, \"FutureCreationForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","ChevronRight","Calendar","Info","DollarSign","TrendingUp","Settings","CheckCircle2","AlertCircle","ChevronLeft","Loader","motion","AnimatePresence","jsxDEV","_jsxDEV","Fragment","_Fragment","FutureCreationForm","_s","form","setForm","symbol","description","isin","expirationCode","parentTicker","fullName","segment","maturityDate","firstTradingDate","lastTraadingDate","initialMarginAmount","percentageMargin","lotSize","contractMultiplier","tradingCurrency","underlyingType","underlyingId","settlementMethod","instrumentStatus","tickSize","tickValue","depositType","currentStep","setCurrentStep","expandedSections","setExpandedSections","settlementMethods","setSettlementMethods","depositTypes","setDepositTypes","underlyingTypes","setUnderlyingTypes","underlyingAssets","setUnderlyingAssets","editMode","setEditMode","tickSizeStr","setTickSizeStr","percentageMarginStr","setPercentageMarginStr","tickValueInput","setTickValueInput","contractMultiplierInput","setContractMultiplierInput","completedSections","setCompletedSections","Set","formErrors","setFormErrors","justArrivedOnLastStep","setJustArrivedOnLastStep","fetchEnums","settlementRes","depositRes","typeRes","Promise","all","get","data","then","res","catch","prev","toString","parseTickSize","contractMultiplierCalc","tickValueCalc","parsePercentageMargin","str","val","parseFloat","isNaN","isRate","isAmount","handleChange","e","name","value","type","target","checked","undefined","handlePercentageMarginChange","handleInitialMarginAmountChange","handleTickValueChange","handleContractMultiplierChange","handleTickSizeChange","handlePercentageMarginInputChange","handleModeChange","mode","isSubmitting","setIsSubmitting","validateForm","errors","Object","keys","length","handleSubmit","preventDefault","formSections","alert","post","err","console","error","initialMarginAmountStr","setInitialMarginAmountStr","parseInitialMarginAmount","handleInitialMarginAmountInputChange","id","title","icon","className","fileName","_jsxFileName","lineNumber","columnNumber","fields","completedSteps","setCompletedSteps","validateStep","stepIndex","section","forEach","field","String","nextStep","add","prevStep","pageTransition","initial","opacity","x","animate","exit","Tooltip","children","ProgressBar","totalSteps","percentage","Array","from","map","_","index","has","div","width","transition","duration","HelpTooltip","content","ValidationMessage","message","colors","success","info","icons","y","FormField","label","onChange","required","disabled","helpText","options","readOnly","option","renderStepContent","variants","onClick","asset","identifier","method","showHelp","setShowHelp","getContextualHelp","height","item","_c","$RefreshReg$"],"sources":["C:/Users/chemseddine/Desktop/future_sur_taux/frontend/src/components/FutureCreationForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { ChevronRight, ChevronDown, Calendar, Info, DollarSign, TrendingUp, Settings, CheckCircle2, AlertCircle, ChevronLeft, Loader } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface FutureCreationDTO {\n  symbol: string;\n  description: string;\n  isin: string;\n  expirationCode: string;\n  parentTicker: string;\n  fullName: string;\n  segment: string;\n  maturityDate: string;\n  firstTradingDate: string;\n  lastTraadingDate: string;\n  initialMarginAmount: number;\n  percentageMargin: number;\n  lotSize: number;\n  contractMultiplier: number;\n  tradingCurrency: string;\n  underlyingType: string;\n  underlyingId: number;\n  settlementMethod: string;\n  instrumentStatus: boolean;\n  tickSize: number;\n  tickValue: number;\n  depositType: string;\n}\n\n// Ajouter l'interface pour les sections\ninterface FormSection {\n  id: string;\n  title: string;\n  icon: React.ReactNode;\n  description: string;\n  fields: (keyof FutureCreationDTO)[];\n}\n\n// Ajouter l'interface pour les erreurs\ninterface FormErrors {\n  [key: string]: string;\n}\n\nconst FutureCreationForm: React.FC = () => {\n  const [form, setForm] = useState<FutureCreationDTO>({\n    symbol: '',\n    description: '',\n    isin: '',\n    expirationCode: '',\n    parentTicker: '',\n    fullName: '',\n    segment: '',\n    maturityDate: '',\n    firstTradingDate: '',\n    lastTraadingDate: '',\n    initialMarginAmount: 0,\n    percentageMargin: 0,\n    lotSize: 0,\n    contractMultiplier: 0,\n    tradingCurrency: '',\n    underlyingType: '',\n    underlyingId: 0,\n    settlementMethod: '',\n    instrumentStatus: false,\n    tickSize: 0,\n    tickValue: 0,\n    depositType: '',\n  });\nconst [currentStep, setCurrentStep] = useState(0);\n  const [expandedSections, setExpandedSections] = useState({});\n  const [settlementMethods, setSettlementMethods] = useState<string[]>([]);\n  const [depositTypes, setDepositTypes] = useState<string[]>([]);\n  const [underlyingTypes, setUnderlyingTypes] = useState<string[]>([]);\n  const [underlyingAssets, setUnderlyingAssets] = useState<{ id: number; identifier: string }[]>([]);\n\n  const [editMode, setEditMode] = useState<'tickValue' | 'contractMultiplier'>('tickValue');\n  const [tickSizeStr, setTickSizeStr] = useState('');\n  const [percentageMarginStr, setPercentageMarginStr] = useState('');\n\n  const [tickValueInput, setTickValueInput] = useState(0);\n  const [contractMultiplierInput, setContractMultiplierInput] = useState(0);\nconst [completedSections, setCompletedSections] = useState(new Set());\n  // Définir correctement formErrors avec son type\n  const [formErrors, setFormErrors] = useState<FormErrors>({});\n  const [justArrivedOnLastStep, setJustArrivedOnLastStep] = useState(false);\n  useEffect(() => {\n    async function fetchEnums() {\n      const [settlementRes, depositRes, typeRes] = await Promise.all([\n        axios.get<string[]>('/api/enums/settlement-methods'),\n        axios.get<string[]>('/api/enums/deposit-types'),\n        axios.get<string[]>('/api/underlyings/types'),\n      ]);\n      setSettlementMethods(settlementRes.data);\n      setDepositTypes(depositRes.data);\n      setUnderlyingTypes(typeRes.data);\n    }\n    fetchEnums();\n  }, []);\n\n  useEffect(() => {\n    if (form.underlyingType) {\n      axios.get<{ id: number; identifier: string }[]>(`/api/underlying-assets?type=${form.underlyingType}`)\n        .then(res => setUnderlyingAssets(res.data))\n        .catch(() => setUnderlyingAssets([]));\n      setForm(prev => ({ ...prev, underlyingId: 0 }));\n    } else {\n      setUnderlyingAssets([]);\n      setForm(prev => ({ ...prev, underlyingId: 0 }));\n    }\n  }, [form.underlyingType]);\n\n  useEffect(() => {\n    setTickSizeStr(form.tickSize > 0 ? form.tickSize.toString() : '');\n  }, [form.tickSize]);\nuseEffect(() => {\n  setPercentageMarginStr(form.percentageMargin > 0 ? form.percentageMargin.toString() : '');\n}, [form.percentageMargin]);\n\nuseEffect(() => {\n  const tickSize = parseTickSize(tickSizeStr);\n  if (editMode === 'tickValue') {\n    const contractMultiplierCalc = tickSize > 0 ? tickValueInput / tickSize : 0;\n\n    // Met à jour form seulement si les valeurs ont changé\n    setForm(prev => {\n      if (\n        prev.tickSize !== tickSize ||\n        prev.tickValue !== tickValueInput ||\n        prev.contractMultiplier !== contractMultiplierCalc\n      ) {\n        return {\n          ...prev,\n          tickSize,\n          tickValue: tickValueInput,\n          contractMultiplier: contractMultiplierCalc,\n        };\n      }\n      return prev;\n    });\n\n    // Pour l'affichage local, on peut mettre à jour contractMultiplierInput pour rester cohérent\n    setContractMultiplierInput(contractMultiplierCalc);\n\n  } else {\n    const tickValueCalc = contractMultiplierInput * tickSize;\n\n    setForm(prev => {\n      if (\n        prev.tickSize !== tickSize ||\n        prev.contractMultiplier !== contractMultiplierInput ||\n        prev.tickValue !== tickValueCalc\n      ) {\n        return {\n          ...prev,\n          tickSize,\n          contractMultiplier: contractMultiplierInput,\n          tickValue: tickValueCalc,\n        };\n      }\n      return prev;\n    });\n\n    // Mettre à jour tickValueInput local pour affichage\n    setTickValueInput(tickValueCalc);\n  }\n}, [tickSizeStr, editMode, tickValueInput, contractMultiplierInput]);\n\nconst parsePercentageMargin = (str: string): number => {\n  if (!str) return 0;\n  const val = parseFloat(str);\n  return isNaN(val) ? 0 : val;\n};\n\n  const parseTickSize = (str: string): number => {\n    if (!str) return 0;\n    const val = parseFloat(str);\n    return isNaN(val) ? 0 : val;\n  };\n\n  const isRate = form.depositType === 'RATE';\n  const isAmount = form.depositType === 'AMOUNT';\n\n  // Corriger le handler pour les checkboxes\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    const checked = type === 'checkbox' ? (e.target as HTMLInputElement).checked : undefined;\n    \n    setForm(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handlePercentageMarginChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = parseFloat(e.target.value);\n    setForm(prev => ({ ...prev, percentageMargin: val, initialMarginAmount: prev.lotSize * val }));\n  };\n\n  const handleInitialMarginAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = parseFloat(e.target.value);\n    setForm(prev => ({ ...prev, initialMarginAmount: val, percentageMargin: prev.lotSize > 0 ? val / prev.lotSize : 0 }));\n  };\n\n  const handleTickValueChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = parseFloat(e.target.value);\n    setTickValueInput(val);\n  };\n\n  const handleContractMultiplierChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = parseFloat(e.target.value);\n    setContractMultiplierInput(val);\n  };\n\n  const handleTickSizeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setTickSizeStr(e.target.value);\n  };\n  const handlePercentageMarginInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n  const str = e.target.value;\n  setPercentageMarginStr(str);\n  const val = parsePercentageMargin(str);\n  setForm(prev => ({\n    ...prev,\n    percentageMargin: val,\n    initialMarginAmount: prev.lotSize * val\n  }));\n};\n\n\n  useEffect(() => {\n    setForm(prev => {\n      if (isRate) {\n        return { ...prev, initialMarginAmount: prev.lotSize * prev.percentageMargin };\n      } else if (isAmount) {\n        return { ...prev, percentageMargin: prev.lotSize > 0 ? prev.initialMarginAmount / prev.lotSize : 0 };\n      }\n      return prev;\n    });\n  }, [form.lotSize, form.depositType]);\n\n  const handleModeChange = (mode: 'tickValue' | 'contractMultiplier') => {\n    setEditMode(mode);\n  };\n\n  // Ajouter un état pour la validation globale\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Fonction de validation complète\n  const validateForm = (): boolean => {\n    const errors: { [key: string]: string } = {};\n\n    // Validation des champs obligatoires\n    if (!form.symbol) errors.symbol = 'Le symbole est requis';\n    if (!form.underlyingType) errors.underlyingType = 'Le type de sous-jacent est requis';\n    if (!form.underlyingId) errors.underlyingId = 'Le sous-jacent est requis';\n    if (!form.depositType) errors.depositType = 'Le type de dépôt est requis';\n    if (!form.lotSize) errors.lotSize = 'La taille de lot est requise';\n    if (!form.tickSize) errors.tickSize = 'Le tick size est requis';\n    if (!form.firstTradingDate) errors.firstTradingDate = 'La date de première négociation est requise';\n    if (!form.lastTraadingDate) errors.lastTraadingDate = 'La date de dernière négociation est requise';\n    if (!form.tradingCurrency) errors.tradingCurrency = 'La devise de négociation est requise';\n    if (!form.settlementMethod) errors.settlementMethod = 'La méthode de règlement est requise';\n\n    // Validation des valeurs numériques\n    if (form.tickSize <= 0) errors.tickSize = 'Le tick size doit être supérieur à 0';\n    if (form.lotSize <= 0) errors.lotSize = 'La taille de lot doit être supérieure à 0';\n\n    // Mise à jour des erreurs\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  // Modifier le handleSubmit\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    // Empêcher la soumission si on n'est pas sur la dernière étape\n    if (currentStep !== formSections.length - 1) {\n      return;\n    }\n    // Empêcher la double soumission\n    if (isSubmitting) return;\n    \n    // Valider le formulaire\n    if (!validateForm()) {\n      alert('Veuillez corriger les erreurs avant de soumettre le formulaire');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      await axios.post('/api/futures', form);\n      alert('Future créé avec succès');\n      // Optionnel : rediriger ou réinitialiser le formulaire\n    } catch (err) {\n      alert('Erreur lors de la création. Veuillez vérifier les données et réessayer.');\n      console.error(err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const [initialMarginAmountStr, setInitialMarginAmountStr] = useState('');\n\nuseEffect(() => {\n  setInitialMarginAmountStr(form.initialMarginAmount > 0 ? form.initialMarginAmount.toString() : '');\n}, [form.initialMarginAmount]);\n\nconst parseInitialMarginAmount = (str: string): number => {\n  if (!str) return 0;\n  const val = parseFloat(str);\n  return isNaN(val) ? 0 : val;\n};\n\nconst handleInitialMarginAmountInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n  const str = e.target.value;\n  setInitialMarginAmountStr(str);\n  const val = parseInitialMarginAmount(str);\n  setForm(prev => ({\n    ...prev,\n    initialMarginAmount: val,\n    percentageMargin: prev.lotSize > 0 ? val / prev.lotSize : 0,\n  }));\n};\n\n\n  // Définir les sections avec leurs champs requis\n  const formSections: FormSection[] = [\n    {\n      id: 'identification',\n      title: \"Identification de l'instrument\",\n      icon: <Info className=\"w-5 h-5\" />,\n      description: \"Informations de base\",\n      fields: ['symbol', 'description', 'isin', 'fullName']\n    },\n    {\n      id: 'deposit',\n      title: \"Dépôt & Marges\",\n      icon: <DollarSign className=\"w-5 h-5\" />,\n      description: \"Configuration des marges\",\n      fields: ['depositType', 'lotSize', 'initialMarginAmount', 'percentageMargin']\n    },\n    {\n      id: 'underlying',\n      title: \"Sous-jacents\",\n      icon: <TrendingUp className=\"w-5 h-5\" />,\n      description: \"Définition du sous-jacent\",\n      fields: ['underlyingType', 'underlyingId']\n    },\n    {\n      id: 'trading',\n      title: \"Négociation\",\n      icon: <Calendar className=\"w-5 h-5\" />,\n      description: \"Paramètres de trading\",\n      fields: ['firstTradingDate', 'lastTraadingDate', 'tradingCurrency', 'tickSize', 'settlementMethod']\n    }\n  ];\n\n  // Ajouter l'état pour la navigation\n  const [completedSteps, setCompletedSteps] = useState<Set<number>>(new Set());\n\n  // Fonctions de navigation\n  // Améliorer la fonction de validation des étapes\n  const validateStep = (stepIndex: number): boolean => {\n    const section = formSections[stepIndex];\n    const errors: FormErrors = {};\n\n    section.fields.forEach(field => {\n      const value = form[field];\n      if (value === undefined || value === '' || value === 0) {\n        errors[field] = `Le champ ${field} est requis`;\n      }\n\n      // Validations spécifiques par champ\n      switch (field) {\n        case 'tickSize':\n          if (parseFloat(String(value)) <= 0) {\n            errors[field] = 'Le tick size doit être supérieur à 0';\n          }\n          break;\n        case 'lotSize':\n          if (parseFloat(String(value)) <= 0) {\n            errors[field] = 'La taille de lot doit être supérieure à 0';\n          }\n          break;\n        // Ajouter d'autres validations spécifiques si nécessaire\n      }\n    });\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  // Modifier la fonction nextStep pour valider uniquement l'étape courante et effacer les erreurs des autres étapes\n  const nextStep = () => {\n    if (currentStep < formSections.length - 1) {\n      const section = formSections[currentStep];\n      const errors: FormErrors = {};\n      section.fields.forEach(field => {\n        const value = form[field];\n        if (value === undefined || value === '' || value === 0) {\n          errors[field] = `Le champ ${field} est requis`;\n        }\n        // Validations spécifiques\n        switch (field) {\n          case 'tickSize':\n            if (parseFloat(String(value)) <= 0) {\n              errors[field] = 'Le tick size doit être supérieur à 0';\n            }\n            break;\n          case 'lotSize':\n            if (parseFloat(String(value)) <= 0) {\n              errors[field] = 'La taille de lot doit être supérieure à 0';\n            }\n            break;\n        }\n      });\n      setFormErrors(errors); // On ne garde que les erreurs de l'étape courante\n      if (Object.keys(errors).length === 0) {\n        setCompletedSteps(prev => new Set(prev).add(currentStep));\n        setCurrentStep(prev => prev + 1);\n        if (currentStep === formSections.length - 2) {\n          setJustArrivedOnLastStep(true);\n        }\n      }\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStep > 0) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n\n  // Ajouter des animations pour les transitions\n  const pageTransition = {\n    initial: { opacity: 0, x: -20 },\n    animate: { opacity: 1, x: 0 },\n    exit: { opacity: 0, x: 20 }\n  };\n\n  // Ajouter un composant pour les tooltips\n  const Tooltip = ({ children }: { children: React.ReactNode }) => (\n    <div className=\"absolute -top-8 left-0 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap\">\n      {children}\n    </div>\n  );\n\n  // Ajouter le composant ProgressBar\nconst ProgressBar = ({ currentStep, totalSteps, completedSteps }: { currentStep: number; totalSteps: number; completedSteps: Set<number> }) => {\n  const percentage = ((currentStep + 1) / totalSteps) * 100;\n  \n  return (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center justify-between mb-6\">\n        {Array.from({ length: totalSteps }).map((_, index) => (\n          <div key={index} className=\"flex flex-col items-center relative group\">\n            <div\n              className={`\n                w-10 h-10 rounded-full flex items-center justify-center\n                transition-all duration-300 ease-in-out\n                ${\n                  completedSteps.has(index)\n                    ? 'bg-teal-600 text-white'\n                    : index === currentStep\n                    ? 'bg-teal-100 text-teal-600 border-2 border-teal-600'\n                    : 'bg-gray-100 text-gray-400'\n                }\n              `}\n            >\n              {completedSteps.has(index) ? (\n                <CheckCircle2 className=\"w-6 h-6\" />\n              ) : (\n                <span className=\"text-sm font-semibold\">{index + 1}</span>\n              )}\n            </div>\n            <div className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n              <div className=\"bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap\">\n                {formSections[index].title}\n              </div>\n            </div>\n            {index < totalSteps - 1 && (\n              <div\n                className={`absolute h-0.5 w-[200%] left-1/2 top-5 -z-10\n                  ${index < currentStep ? 'bg-teal-600' : 'bg-gray-200'}`}\n              />\n            )}\n          </div>\n        ))}\n      </div>\n      <div className=\"relative h-2 bg-gray-100 rounded-full overflow-hidden\">\n        <motion.div\n          className=\"absolute h-full bg-teal-600\"\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.3 }}\n        />\n      </div>\n    </div>\n  );\n};\n\n// Ajouter le composant HelpTooltip\nconst HelpTooltip = ({ content }: { content: string }) => (\n  <div className=\"group relative inline-block ml-2\">\n    <Info className=\"w-4 h-4 text-gray-400 cursor-help\" />\n    <div className=\"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-200 bottom-full mb-2 left-1/2 transform -translate-x-1/2\">\n      <div className=\"bg-gray-800 text-white text-sm rounded-lg py-2 px-3 max-w-xs\">\n        {content}\n        <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-gray-800\" />\n      </div>\n    </div>\n  </div>\n);\n\n// Ajouter le composant ValidationMessage\nconst ValidationMessage = ({ message, type }: { message: string; type: 'error' | 'success' | 'info' }) => {\n  const colors = {\n    error: 'text-red-500 bg-red-50',\n    success: 'text-green-500 bg-green-50',\n    info: 'text-blue-500 bg-blue-50'\n  };\n\n  const icons = {\n    error: <AlertCircle className=\"w-4 h-4 mr-2\" />,\n    success: <CheckCircle2 className=\"w-4 h-4 mr-2\" />,\n    info: <Info className=\"w-4 h-4 mr-2\" />\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -10 }}\n      className={`flex items-center ${colors[type]} rounded-lg px-3 py-2 text-sm mt-1`}\n    >\n      {icons[type]}\n      {message}\n    </motion.div>\n  );\n};\n\n  // Ajouter le composant FormField\nconst FormField = ({\n  label,\n  name,\n  value,\n  onChange,\n  type = 'text',\n  required = false,\n  error,\n  disabled = false,\n  helpText,\n  options = [],\n  readOnly = false,\n  className = ''\n}: {\n  label: string;\n  name: string;\n  value: any;\n  onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => void;\n  type?: string;\n  required?: boolean;\n  error?: string;\n  disabled?: boolean;\n  helpText?: string;\n  options?: { value: string; label: string }[];\n  readOnly?: boolean;\n  className?: string;\n}) => {\n  return (\n    <div className={`space-y-1 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <label className=\"block text-sm font-medium text-gray-700\">\n          <span className=\"flex items-center\">\n            {label}\n            {required && <span className=\"text-red-500 ml-1\">*</span>}\n            {helpText && <HelpTooltip content={helpText} />}\n          </span>\n        </label>\n      </div>\n      \n      {type === 'select' ? (\n        <select\n          name={name}\n          value={value}\n          onChange={onChange}\n          disabled={disabled}\n          className={`\n            w-full px-4 py-2 rounded-lg\n            ${disabled ? 'bg-gray-100 cursor-not-allowed' : 'bg-white'}\n            ${error ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-teal-500 focus:ring-teal-500'}\n            transition-all duration-200\n            focus:ring-2 focus:ring-opacity-50\n          `}\n        >\n          <option value=\"\">Sélectionnez une option</option>\n          {options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      ) : (\n        <input\n          type={type}\n          name={name}\n          value={value}\n          onChange={onChange}\n          disabled={disabled}\n          readOnly={readOnly}\n          className={`\n            w-full px-4 py-2 rounded-lg\n            ${disabled || readOnly ? 'bg-gray-100 cursor-not-allowed' : 'bg-white'}\n            ${error ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-300 focus:border-teal-500 focus:ring-teal-500'}\n            transition-all duration-200\n            focus:ring-2 focus:ring-opacity-50\n          `}\n        />\n      )}\n      \n      <AnimatePresence>\n        {error && (\n          <ValidationMessage message={error} type=\"error\" />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\n// Modifier le rendu des champs dans renderStepContent\nconst renderStepContent = () => {\n  return (\n    <AnimatePresence mode=\"wait\">\n      <motion.div\n        key={currentStep}\n        initial=\"initial\"\n        animate=\"animate\"\n        exit=\"exit\"\n        variants={pageTransition}\n        transition={{ duration: 0.3 }}\n        className=\"min-h-[400px]\"\n      >\n        {currentStep === 0 && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                label=\"Code valeur\"\n                name=\"symbol\"\n                value={form.symbol}\n                onChange={handleChange}\n                required\n                error={formErrors.symbol}\n                helpText=\"Identifiant unique de l'instrument financier\"\n              />\n              \n              <FormField\n                label=\"Code ISIN\"\n                name=\"isin\"\n                value={form.isin}\n                onChange={handleChange}\n                error={formErrors.isin}\n                helpText=\"Code international standardisé (12 caractères)\"\n              />\n              \n              <FormField\n                label=\"Code d'expiration\"\n                name=\"expirationCode\"\n                value={form.expirationCode}\n                onChange={handleChange}\n                error={formErrors.expirationCode}\n                helpText=\"Code qui identifie la date d'expiration\"\n              />\n              \n              <FormField\n                label=\"Ticker parent\"\n                name=\"parentTicker\"\n                value={form.parentTicker}\n                onChange={handleChange}\n                error={formErrors.parentTicker}\n                helpText=\"Code de l'instrument parent\"\n              />\n              \n              <FormField\n                label=\"Description\"\n                name=\"description\"\n                value={form.description}\n                onChange={handleChange}\n                error={formErrors.description}\n                helpText=\"Description courte de l'instrument\"\n              />\n              \n              <FormField\n                label=\"Nom complet\"\n                name=\"fullName\"\n                value={form.fullName}\n                onChange={handleChange}\n                error={formErrors.fullName}\n                helpText=\"Nom officiel complet de l'instrument\"\n              />\n              \n              <FormField\n                label=\"Structure marché\"\n                name=\"segment\"\n                value={form.segment}\n                onChange={handleChange}\n                error={formErrors.segment}\n                helpText=\"Segment de marché où l'instrument est négocié\"\n              />\n              \n              <FormField\n                label=\"Date d'échéance\"\n                name=\"maturityDate\"\n                value={form.maturityDate}\n                onChange={handleChange}\n                type=\"date\"\n                error={formErrors.maturityDate}\n                helpText=\"Date d'expiration du contrat\"\n              />\n            </div>\n          </div>\n        )}\n\n        {currentStep === 1 && (\n          <div className=\"space-y-6\">\n            <div className=\"flex space-x-4 mb-6\">\n              <button\n                type=\"button\"\n                onClick={() => setForm(prev => ({ ...prev, depositType: 'AMOUNT' }))}\n                className={`\n                  flex-1 py-3 px-4 rounded-lg font-semibold\n                  transition-all duration-300 transform hover:scale-105\n                  ${isAmount \n                    ? 'bg-teal-600 text-white shadow-lg' \n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                  }\n                `}\n              >\n                <span className=\"flex items-center justify-center\">\n                  <DollarSign className=\"w-5 h-5 mr-2\" />\n                  Montant fixe\n                </span>\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setForm(prev => ({ ...prev, depositType: 'RATE' }))}\n                className={`\n                  flex-1 py-3 px-4 rounded-lg font-semibold\n                  transition-all duration-300 transform hover:scale-105\n                  ${isRate \n                    ? 'bg-teal-600 text-white shadow-lg' \n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                  }\n                `}\n              >\n                <span className=\"flex items-center justify-center\">\n                  <TrendingUp className=\"w-5 h-5 mr-2\" />\n                  Pourcentage\n                </span>\n              </button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                label=\"Taille de lot\"\n                name=\"lotSize\"\n                value={form.lotSize}\n                onChange={handleChange}\n                type=\"number\"\n                required\n                error={formErrors.lotSize}\n                helpText=\"Nombre d'unités par contrat\"\n              />\n              \n              <FormField\n                label=\"Type de dépôt\"\n                name=\"depositType\"\n                value={form.depositType}\n                onChange={handleChange}\n                type=\"select\"\n                required\n                error={formErrors.depositType}\n                options={depositTypes.map(type => ({ value: type, label: type }))}\n                helpText=\"Méthode de calcul de la marge initiale\"\n              />\n              \n              <FormField\n                label=\"Montant de la marge initiale\"\n                name=\"initialMarginAmount\"\n                value={initialMarginAmountStr}\n                onChange={handleInitialMarginAmountInputChange}\n                type=\"text\"\n                error={formErrors.initialMarginAmount}\n                readOnly={!isAmount}\n                helpText={isAmount ? \"Montant fixe requis pour la marge\" : \"Calculé automatiquement\"}\n              />\n              \n              <FormField\n                label=\"Pourcentage de marge\"\n                name=\"percentageMargin\"\n                value={percentageMarginStr}\n                onChange={handlePercentageMarginInputChange}\n                type=\"text\"\n                error={formErrors.percentageMargin}\n                readOnly={!isRate}\n                helpText={isRate ? \"Pourcentage de la taille de lot\" : \"Calculé automatiquement\"}\n              />\n            </div>\n          </div>\n        )}\n\n        {currentStep === 2 && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                label=\"Type du sous-jacent\"\n                name=\"underlyingType\"\n                value={form.underlyingType}\n                onChange={handleChange}\n                type=\"select\"\n                required\n                error={formErrors.underlyingType}\n                options={underlyingTypes.map(type => ({ value: type, label: type }))}\n                helpText=\"Nature de l'actif sous-jacent\"\n              />\n              \n              <FormField\n                label=\"Sous-jacent\"\n                name=\"underlyingId\"\n                value={form.underlyingId}\n                onChange={handleChange}\n                type=\"select\"\n                required\n                disabled={!form.underlyingType}\n                error={formErrors.underlyingId}\n                options={underlyingAssets.map(asset => ({ value: asset.id.toString(), label: asset.identifier }))}\n                helpText=\"Actif spécifique sur lequel le future est basé\"\n              />\n            </div>\n          </div>\n        )}\n\n        {currentStep === 3 && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-gradient-to-r from-teal-50 to-white p-6 rounded-lg space-y-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Configuration des Ticks</h3>\n                <HelpTooltip content=\"Configurez soit la Tick Value, soit le Multiplicateur. L'autre valeur sera calculée automatiquement.\" />\n              </div>\n\n              <FormField\n                label=\"Tick Size\"\n                name=\"tickSize\"\n                value={tickSizeStr}\n                onChange={handleTickSizeChange}\n                type=\"text\"\n                required\n                error={formErrors.tickSize}\n                helpText=\"Plus petite variation possible du prix\"\n              />\n\n              <div className=\"flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => handleModeChange('tickValue')}\n                  className={`\n                    flex-1 py-3 px-4 rounded-lg font-medium\n                    transition-all duration-300 transform\n                    ${editMode === 'tickValue' \n                      ? 'bg-teal-600 text-white scale-105 shadow-lg' \n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                    }\n                  `}\n                >\n                  <span className=\"flex items-center justify-center\">\n                    <DollarSign className=\"w-5 h-5 mr-2\" />\n                    Saisir Tick Value\n                  </span>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => handleModeChange('contractMultiplier')}\n                  className={`\n                    flex-1 py-3 px-4 rounded-lg font-medium\n                    transition-all duration-300 transform\n                    ${editMode === 'contractMultiplier' \n                      ? 'bg-teal-600 text-white scale-105 shadow-lg' \n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                    }\n                  `}\n                >\n                  <span className=\"flex items-center justify-center\">\n                    <Settings className=\"w-5 h-5 mr-2\" />\n                    Saisir Multiplicateur\n                  </span>\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <FormField\n                  label=\"Tick Value\"\n                  name=\"tickValue\"\n                  value={editMode === 'tickValue' ? tickValueInput : form.tickValue}\n                  onChange={handleTickValueChange}\n                  type=\"number\"\n                  readOnly={editMode !== 'tickValue'}\n                  error={formErrors.tickValue}\n                  helpText={editMode === 'tickValue' ? \"Valeur monétaire d'un tick\" : \"Calculé automatiquement\"}\n                />\n\n                <FormField\n                  label=\"Multiplicateur\"\n                  name=\"contractMultiplier\"\n                  value={editMode === 'contractMultiplier' ? contractMultiplierInput : form.contractMultiplier}\n                  onChange={handleContractMultiplierChange}\n                  type=\"number\"\n                  readOnly={editMode !== 'contractMultiplier'}\n                  error={formErrors.contractMultiplier}\n                  helpText={editMode === 'contractMultiplier' ? \"Multiplicateur du contrat\" : \"Calculé automatiquement\"}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                label=\"Date de première négociation\"\n                name=\"firstTradingDate\"\n                value={form.firstTradingDate}\n                onChange={handleChange}\n                type=\"date\"\n                required\n                error={formErrors.firstTradingDate}\n                helpText=\"Premier jour de négociation\"\n              />\n              \n              <FormField\n                label=\"Date de dernière négociation\"\n                name=\"lastTraadingDate\"\n                value={form.lastTraadingDate}\n                onChange={handleChange}\n                type=\"date\"\n                required\n                error={formErrors.lastTraadingDate}\n                helpText=\"Dernier jour de négociation\"\n              />\n              \n              <FormField\n                label=\"Devise de négociation\"\n                name=\"tradingCurrency\"\n                value={form.tradingCurrency}\n                onChange={handleChange}\n                required\n                error={formErrors.tradingCurrency}\n                helpText=\"Devise dans laquelle le future est négocié\"\n              />\n              \n              <FormField\n                label=\"Mode de livraison\"\n                name=\"settlementMethod\"\n                value={form.settlementMethod}\n                onChange={handleChange}\n                type=\"select\"\n                required\n                error={formErrors.settlementMethod}\n                options={settlementMethods.map(method => ({ value: method, label: method }))}\n                helpText=\"Méthode de règlement à l'échéance\"\n              />\n              \n              <div className=\"space-y-2\">\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Cotation\n                  <HelpTooltip content=\"Statut de cotation de l'instrument\" />\n                </label>\n                <div className=\"flex space-x-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setForm(prev => ({ ...prev, instrumentStatus: true }))}\n                    className={`\n                      flex-1 py-3 px-4 rounded-lg font-semibold\n                      transition-all duration-200\n                      ${form.instrumentStatus \n                        ? 'bg-green-600 text-white shadow-lg' \n                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                      }\n                    `}\n                  >\n                    <span className=\"flex items-center justify-center\">\n                      <CheckCircle2 className=\"w-5 h-5 mr-2\" />\n                      Côté\n                    </span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setForm(prev => ({ ...prev, instrumentStatus: false }))}\n                    className={`\n                      flex-1 py-3 px-4 rounded-lg font-semibold\n                      transition-all duration-200\n                      ${!form.instrumentStatus \n                        ? 'bg-red-600 text-white shadow-lg' \n                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                      }\n                    `}\n                  >\n                    <span className=\"flex items-center justify-center\">\n                      <AlertCircle className=\"w-5 h-5 mr-2\" />\n                      Non côté\n                    </span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n  // Ajouter un état pour le panneau d'aide\n  const [showHelp, setShowHelp] = useState(false);\n\n  // Ajouter une fonction pour obtenir l'aide contextuelle\n  const getContextualHelp = (stepIndex: number) => {\n    switch (stepIndex) {\n      case 0:\n        return [\n          \"Le code valeur est l'identifiant unique de l'instrument financier. Il doit être unique et facile à retenir.\",\n          \"Le code ISIN est un code international standardisé pour identifier les titres financiers. Il est généralement composé de 12 chiffres.\",\n          \"Le nom complet est le nom officiel de l'instrument, souvent plus long que le code valeur.\",\n          \"La structure marché définit le marché sur lequel l'instrument est négocié (bourse, cote, etc.).\"\n        ];\n      case 1:\n        return [\n          \"La taille de lot est le nombre d'unités de l'instrument que vous devez détenir pour ouvrir une position.\",\n          \"Le type de dépôt détermine comment la marge initiale est calculée. Pourcentage signifie que la marge est un pourcentage du montant de la position, Montant fixe signifie que la marge est un montant fixe.\",\n          \"Le montant de la marge initiale est le montant requis pour ouvrir une position. Il peut être calculé automatiquement ou saisi manuellement.\",\n          \"Le pourcentage de marge est le pourcentage de la taille de lot qui doit être déposé comme marge initiale.\"\n        ];\n      case 2:\n        return [\n          \"Le type du sous-jacent définit la nature de l'actif sous-jacent (action, obligation, indice, etc.).\",\n          \"Le sous-jacent est l'actif physique ou financier sur lequel le future est basé. Il doit être clairement défini.\",\n          \"L'ID du sous-jacent est l'identifiant unique de l'actif dans la base de données.\"\n        ];\n      case 3:\n        return [\n          \"La Tick Size est la plus petite variation possible du prix de l'instrument. Elle détermine la granularité des prix.\",\n          \"Vous pouvez soit saisir la Tick Value, soit le Multiplicateur. L'autre valeur sera calculée automatiquement.\",\n          \"La Tick Value est le montant en devise de base qui correspond à la variation de prix d'une unité.\",\n          \"Le Multiplicateur est le nombre de Tick Value qui correspondent à une variation de prix d'une unité.\"\n        ];\n      default:\n        return [];\n    }\n  };\n\n  return (\n  <div className=\"min-h-screen bg-gradient-to-br from-teal-50 to-white py-8 px-4 sm:px-6 lg:px-8\">\n    <div className=\"max-w-4xl mx-auto\">\n      {/* En-tête avec description */}\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Création d'un Future</h1>\n        <p className=\"text-gray-600\">\n          Complétez les informations en suivant les étapes. Les champs marqués d'un <span className=\"text-red-500\">*</span> sont obligatoires.\n        </p>\n      </div>\n\n      {/* Barre de progression améliorée */}\n      <ProgressBar\n        currentStep={currentStep}\n        totalSteps={formSections.length}\n        completedSteps={completedSteps}\n      />\n\n      {/* Contenu principal */}\n      <div className=\"bg-white rounded-2xl shadow-lg p-8\">\n        {/* En-tête de section avec aide contextuelle */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-teal-100 rounded-lg mr-4\">\n              {formSections[currentStep].icon}\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-800\">\n                {formSections[currentStep].title}\n              </h2>\n              <p className=\"text-gray-600\">\n                {formSections[currentStep].description}\n              </p>\n            </div>\n          </div>\n          <button\n            type=\"button\"\n            className=\"text-teal-600 hover:text-teal-700 flex items-center\"\n            onClick={() => setShowHelp(prev => !prev)}\n          >\n            <Settings className=\"w-5 h-5 mr-2\" />\n            Aide\n          </button>\n        </div>\n\n        {/* Panneau d'aide contextuelle */}\n        <AnimatePresence>\n          {showHelp && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"bg-teal-50 rounded-lg p-4 mb-6\"\n            >\n              <h3 className=\"font-semibold text-teal-800 mb-2\">Aide pour cette section</h3>\n              <ul className=\"text-teal-700 space-y-2\">\n                {getContextualHelp(currentStep).map((item, index) => (\n                  <li key={index} className=\"flex items-start\">\n                    <Info className=\"w-4 h-4 mr-2 mt-1 flex-shrink-0\" />\n                    {item}\n                  </li>\n                ))}\n              </ul>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Contenu du formulaire */}\n        <div className=\"transition-all duration-300 transform\">\n          {renderStepContent()}\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between mt-6\">\n        <button\n          type=\"button\"\n          onClick={prevStep}\n          className={`\n            px-6 py-3 rounded-lg font-medium\n            transition-all duration-200\n            flex items-center\n            ${\n              currentStep === 0\n                ? 'opacity-50 cursor-not-allowed bg-gray-200'\n                : 'bg-white hover:bg-gray-50 text-gray-700 shadow-sm hover:shadow'\n            }\n          `}\n          disabled={currentStep === 0}\n        >\n          <ChevronLeft className=\"w-5 h-5 mr-2\" />\n          Précédent\n        </button>\n        \n        {currentStep === formSections.length - 1 ? (\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className={`\n              px-8 py-3 bg-teal-600 text-white rounded-lg font-medium\n              hover:bg-teal-700 transition-all duration-200\n              flex items-center\n              ${isSubmitting ? 'opacity-50 cursor-not-allowed' : ''}\n              shadow-lg hover:shadow-xl\n            `}\n          >\n            {isSubmitting ? (\n              <>\n                <Loader className=\"w-5 h-5 mr-2 animate-spin\" />\n                Création en cours...\n              </>\n            ) : (\n              <>\n                Créer le Future\n                <ChevronRight className=\"w-5 h-5 ml-2\" />\n              </>\n            )}\n          </button>\n        ) : (\n          <button\n            type=\"button\"\n            onClick={nextStep}\n            className=\"\n              px-8 py-3 bg-teal-600 text-white rounded-lg font-medium\n              hover:bg-teal-700 transition-all duration-200\n              flex items-center\n              shadow-lg hover:shadow-xl\n            \"\n          >\n            Suivant\n            <ChevronRight className=\"w-5 h-5 ml-2\" />\n          </button>\n        )}\n      </div>\n    </div>\n  </div>\n);\n};\n\nexport default FutureCreationForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}